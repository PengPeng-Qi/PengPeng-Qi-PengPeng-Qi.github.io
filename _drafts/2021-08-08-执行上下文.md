### 什么是执行上下文
**执行上下文是评估和执行`JavaScript`代码的环境**的抽象概念，每当`Javascript` 代码在执行的时候，都会在执行上下文中执行。  
### 执行上下文的类型
- **全局执行上下文**：任何不在函数内部的代码都在全局上下文中，会执行两件事：
  - 1、创建一个全局的`window`对象 
  - 2、设置`this`的值等于这个全局对象
- **函数执行上下文**：每当一个**函数被调用**时，都会为该函数**创建一个新的上下文**
  - 函数上下文可以有任意多个，每当一个新的执行上下文被创建，就会按定义的顺序执行一系列步骤
- **Eval函数执行上下文**：执行在eval函数内部的代码也会有它属于自己的执行上下文

### 执行栈
用来存储代码执行时创建的所有执行上下文  
  
当`Javascript`引擎第一次遇到脚本时，会创建一个全局的执行上下文并且压入当前执行栈，每当引擎遇到一个函数调用，就会为该函数创建一个新的执行上下文并压入栈的顶部。  
  
引擎会执行位于执行上下文位于栈顶的函数，函数执行结束时，执行上下文从栈中弹出，控制流程到达当前执行栈中的下一个流程。
### 如何创建执行上下文
- 1）创建阶段
- 2）执行阶段

#### 创建阶段
- 1）`this`值的决定(`this`绑定)
- 2）创建**词法环境**组件
- 3）创建**变量环境**组件

**This绑定**：  
在全局执行上下文中，`this`的值指向全局变量(浏览器中，`this`指向`window`对象)  
  
在函数执行上下文中，`this`的值指向该函数被如何调用的，如果被一个对象调用，那么`this`的值指向这个调用的对象，否则`this`的值被设置为全局对象或undefined(严格模式下)  
```js
let foo = {
  baz: function() {
  console.log(this);
  }
}

foo.baz();   // 'this' 引用 'foo', 因为 'baz' 被
             // 对象 'foo' 调用

let bar = foo.baz;

bar();       // 'this' 指向全局 window 对象，因为
             // 没有指定引用对象

```

-------
词法环境、变量环境有待更新

- [理解 JavaScript 中的执行上下文和执行栈](https://juejin.cn/post/6844903682283143181)