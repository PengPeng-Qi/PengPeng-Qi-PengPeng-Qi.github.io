## 前言
以下是我结合前面的知识以及本文的相关内容所写的demo
- [简易计算器](/demo/Vue/简易计算器.html)
- [选项卡案例](/demo/Vue/选项卡案例.html)

## Vue基础
### Vue概述
Vue：渐进式JavaScript框架 
### Vue基本使用
Vue代码 --> Vue框架 --> 原生js代码
### Vue模版语法
模板 + 数据 --> 前端渲染 == 静态HTML内容
#### 指令
指令的本质是自定义属性，指令的格式：以`v-`开头(`v-cloak`)  
##### v-cloak
插值表达式存在的问题：‘闪动’，可使用`v-cloak`解决，原理：**先隐藏，替换好值之后再显示最终的值**。
```html
<!-- v-cloak指令的用法
1、提供样式
  [v-cloak]{
    display: none;
  }
2、在插值表达式所在的标签中添加v-cloak指令 -->
<style type="text/css">
[v-cloak]{
  display: none;
}
</style>

  <div id="app">
  <div v-cloak>{{msg}}</div>
</div>
```
##### 数据绑定指令
- `v-text`：填充纯文本
- `v-html`：存在安全问题，本网站内部数据可以使用，来自第三方的数据不可以用
- `v-pre`：填充原始信息(跳过编译部分)

```html
<div>{{msg}}</div>
<div v-text='msg'></div>
<div v-html='msg1'></div>
<div v-pre>{{msg}}</div>
```
##### 数据响应式
数据响应式：数据的变化导致页面内容的变化。  
  
数据绑定：将数据填充到标签中，`v-once`：只编译一次，显示内容不再具有响应式功能。  
```html
<div>{{msg}}</div>
<div v-once>{{info}}</div>
```
#### 双向数据绑定指令
`v-model`指令用法：`<input type="text" v-model="uname" />`
```html
<div>
  <input type="text" v-model='msg'>
</div>
```
##### MVVM思想
- M：model
- V：view
- VM：View-Model

#### 事件绑定
`v-on`指令用法：`<input type=‘button' v-on:click='num++'/>`  
`v-on`简写用法：`<input type=‘button' @click='num++'/>`  

```html
<button v-on:click='num++'>点击</button>
<button @click='num++'>点击1</button>
```
##### 事件函数的调用方式
直接绑定属性名称：`<button v-on:click='say'>Hello</button>`  
调用函数：`<button v-on:click='say()'>Say hi</button>`  
```html
<button @click='handle'>点击2</button>
<button @click='handle()'>点击3</button>

<script type="text/javascript">
  var vm = new Vue({
      el: '#app',
      data: {
          num: 0
      }, // 注意点： 这里不要忘记加逗号 
      // methods 中主要是定义一些函数
      methods: {
          handle: function() {
              // 这里的this是Vue的实例对象+
              console.log(this === vm)
                  //  在函数中想要使用data里面的数据 一定要加this 
              this.num++;
          }
      }
  });
</script>
```
##### 事件函数参数传递
普通参数和事件对象：`<button v-on:click='say("hi",$event)'>Say hi</button>`
```html
<div id="app">
    <div>{{num}}</div>
    <div>
        <!-- 如果事件直接绑定函数名称，那么默认会传递事件对象作为事件函数的第一个参数 -->
        <button v-on:click='handle1'>点击1</button>
        <!-- 2、如果事件绑定函数调用，那么事件对象必须作为最后一个参数显示传递，
              并且事件对象的名称必须是$event 
        -->
        <button v-on:click='handle2(123, 456, $event)'>点击2</button>
    </div>
</div>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript">
    var vm = new Vue({
        el: '#app',
        data: {
            num: 0
        },
        methods: {
            handle1: function(event) {
                console.log(event.target.innerHTML) // 点击1
            },
            handle2: function(p, p1, event) {
                console.log(p, p1)                  // 123 456
                console.log(event.target.innerHTML) // 点击2
                this.num++;
            }
        }
    });
</script>
```
##### 事件修饰符
- `.stop`阻止冒泡：`<a v-on:click.stop="handle">跳转</a>`
- `.prevent`阻止默认行为：`<a v-on:click.prevent="handle">跳转</a>`

```html
<div id="app">
  <div>{{num}}</div>
  <div v-on:click='handle0'>
    <button v-on:click.stop='handle1'>点击1</button>
  </div>
  <div>
    <a href="http://www.baidu.com" v-on:click.prevent='handle2'>百度</a>
  </div>
</div>
```
##### 按钮修饰符
- `.enter`回车键：`<input v-on:keyup.enter='submit'>`
- `.delete`删除键：`<input v-on:keyup.delete='handle'>` 

```html
<div id="app">
  <form action="">
    <div>
      用户名：
      <input type="text" v-on:keyup.delete='clearContent' v-model='uname'>
    </div>
    <div>
      密码：
      <input type="text" v-on:keyup.f1='handleSubmit' v-model='pwd'>
    </div>
    <div>
      <input type="button" v-on:click='handleSubmit' value="提交">
    </div>
  </form>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      uname: '',
      pwd: '',
      age: 0
    },
    methods: {
      clearContent:function(){
        // 按delete键的时候，清空用户名
        this.uname = '';
      },
      handleSubmit: function(){
        console.log(this.uname,this.pwd)
      }
    }
  });
</script>
```
##### 自定义按键修饰符
全局`config.keyCodes`对象，`Vue.config.keyCodes.f1 = 112`

```html
<div id="app">
  <input type="text" v-on:keyup.aaa='handle' v-model='info'>
</div>
<script type="text/javascript">
  /*
    规则：自定义按键修饰符名字是自定义的，但是对应的值必须是按键对应event.keyCode值
  */
  Vue.config.keyCodes.aaa = 65 // 必须按keyCode为65的键， aaa可以随意设置
  var vm = new Vue({
    el: '#app',
    data: {
      info: ''
    },
    methods: {
      handle: function(event){
        console.log(event.keyCode)
      }
    }
  });
</script>
```
#### 属性绑定
`v-bind`指令用法：`<a v-bind:href='url'>跳转</a>`  
缩写：`<a :href='url'>跳转</a>`  
```html
<div id="app">
  <a v-bind:href="url">百度</a>
  <a :href="url">百度1</a>
  <button v-on:click='handle'>切换</button>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      url: 'http://www.baidu.com'
    },
    methods: {
      handle: function(){
        // 修改URL地址
        this.url = 'https://pengpeng-qi.github.io/';
      }
    }
  });
</script>
```
##### v-model的底层实现原理分析
`<input v-bind:value="msg" v-on:input="msg=$event.target.value">`
```html
<div id="app">
  <div>{{msg}}</div>
  // 三种方式同效
  <input type="text" v-bind:value="msg" v-on:input='handle'>
  <input type="text" v-bind:value="msg" v-on:input='msg=$event.target.value'>
  <input type="text" v-model='msg'>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      msg: 'hello'
    },
    methods: {
      handle: function(event){
        // 使用输入域中的最新的数据覆盖原来的数据
        this.msg = event.target.value;
      }
    }
  });
</script>
```
#### 样式绑定
class样式处理：
- 对象语法：`<div v-bind:class="{active: isActive}"></div>`
- 数组语法：`<div v-bind:class="[activeClass, errorClass]"></div>`

对象绑定：
```html
<!-- 对象语法： -->
<!-- active、error css写在style里面 -->
<div id="app">
  <div v-bind:class="{active: isActive,error: isError}">
    测试样式
  </div>
  <button v-on:click='handle'>切换</button>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      isActive: true,
      isError: true
    },
    methods: {
      handle: function(){
        // 控制isActive的值在true和false之间进行切换
        this.isActive = !this.isActive;
        this.isError = !this.isError;
      }
    }
  });
</script>
```
数组绑定：
```html
<!-- 数组语法 -->
<!-- active、error css写在style里面 -->
<div id="app">
  <div v-bind:class='[activeClass, errorClass]'>测试样式</div>
  <button v-on:click='handle'>切换</button>
</div>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      activeClass: 'active',
      errorClass: 'error'
    },
    methods: {
      handle: function(){
        this.activeClass = '';
        this.errorClass = '';
      }
    }
  });
</script>
```
对象与数组绑定的注意事项：
```html
<div id="app">
  <div v-bind:class='[activeClass, errorClass, {test: isTest}]'>对象与数组结合</div>
  <div v-bind:class='arrClasses'>数组形式简化</div>
  <div v-bind:class='objClasses'>对象形式简化</div>
  <div class="base" v-bind:class='objClasses'>多个css</div>

  <button v-on:click='handle'>切换</button>
</div>
<script type="text/javascript">
  /*
    1、对象绑定和数组绑定可以结合使用
    2、class绑定的值可以简化操作
    3、默认的class会保留
  */
  var vm = new Vue({
    el: '#app',
    data: {
      activeClass: 'active',
      errorClass: 'error',
      isTest: true,
      arrClasses: ['active','error'],
      objClasses: {
        active: true,
        error: true
      }
    },
    methods: {
      handle: function(){
        // this.isTest = false;
        this.objClasses.error = false;
      }
    }
  });
</script>
```
style样式处理：
- 对象语法：`<div v-bind:style="{color: activeColor, fontSize: fontSize}"></div>`
- 数组语法：`<div v-bind:style="[baseStyle, overridingStyles]"></div>`

```html
<div id="app">
  <div v-bind:style='{border: borderStyle, width: widthStyle, height: heightStyle}'>对象样式</div>
  <div v-bind:style='objStyles'>简化形式</div>
  <div v-bind:style='[objStyles, overrideStyles]'>第二个style相对于第一个style，有的属性会覆盖，没有的话加上来</div>
  <button v-on:click='handle'>切换</button>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      borderStyle: '1px solid blue',
      widthStyle: '100px',
      heightStyle: '200px',
      objStyles: {
        border: '1px solid green',
        width: '200px',
        height: '100px'
      },
      overrideStyles: {
        border: '5px solid orange',
        backgroundColor: 'blue'
      }
    },
    methods: {
      handle: function(){
        this.heightStyle = '100px';
        this.objStyles.width = '100px';
      }
    }
  });
</script>
```
#### 分支循环结构
**分支结构**：
- 1、`v-if`
- 2、`v-else`
- 3、`v-else-if`
- 4、`v-show`

```html
<div id="app">
  <div v-if='score>=90'>优秀</div>                <!-- 不显示 -->
  <div v-else-if='score<90&&score>=80'>良好</div> <!-- 不显示 -->
  <div v-else-if='score<80&&score>60'>一般</div>  <!-- 不显示 -->
  <div v-else>比较差</div>
  <div v-show='flag'>测试v-show</div>             <!-- 不显示 -->
  <button v-on:click='handle'>点击</button>
</div>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript">
  /*
    v-show的原理：控制元素样式是否显示 display:none
  */
  var vm = new Vue({
    el: '#app',
    data: {
      score: 10,
      flag: false
    },
    methods: {
      handle: function(){
        this.flag = !this.flag;
      }
    }
  });
</script>
```
`v-if`与`v-show`的区别：
- `v-if`控制元素**是否渲染到页面**、实质是控制DOM元素
- `v-show`控制元素**是否显示**(已经渲染到了页面)、适合频繁切换显示模式

**循环结构**：
- 1、`v-for`：遍历数组
  - `<li v-for='item in list'>{{item}}</li>`
  - `<li v-for='(item,index) in list'>{{item}} + '---' +{{index}}</li>`
- 2、key的作用：帮助Vue区分不同的元素，从而提高性能
  - `<li :key='item.id' v-for='(item, index) in list'>{{item}} + --- + {{index}}</li>`
- 3、遍历对象
  - `<div v-for='(value, key, index) in object'></div>`

```html
  <div id="app">
    <div>水果列表</div>
    <ul>
      <!-- 简单数组 -->
      <li v-for='item in fruits'>{{item}}</li>
      <li v-for='(item, index) in fruits'>{{item + '---' + index}}</li>

      <!-- 数组中有对象 -->
      <!-- 如果item没有id，可以使用index -->
      <li :key='item.id' v-for='(item, index) in myFruits'>
        <span>{{item.ename}}</span>   <!-- item是数组中的每一项 -->
        <span>{{item.cname}}</span>
      </li>

    </ul>
  </div>
  <script type="text/javascript">
    var vm = new Vue({
      el: '#app',
      data: {
        fruits: ['apple', 'orange', 'banana'],
        myFruits: [{
          id: 1,
          ename: 'apple',
          cname: '苹果'
        },{
          id: 2,
          ename: 'orange',
          cname: '橘子'
        },{
          id: 3,
          ename: 'banana',
          cname: '香蕉'
        }]
      }
    });
  </script>
```
遍历对象：
```html
<!-- v-if v-for结合使用 -->
<div id="app">
  <div v-if='v==13' v-for='(v,k,i) in obj'>{{v + '---' + k + '---' + i}}</div>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      obj: {
        uname: 'zhangsan',
        age: 13,
        gender: 'female'
      }
    }
  });
</script>
```
### Vue常用特性
#### 表单操作
- input
- textarea
- select
- radio
- checkbox

```html
<div id="app">
  <form action="http://itcast.cn">
    <div>
      <span>姓名：</span>
      <span>
        <input type="text" v-model='uname'>
      </span>
    </div>
    <div>
      <span>性别：</span>
      <span>
        <input type="radio" id="male" value="1" v-model='gender'>
        <label for="male">男</label>
        <input type="radio" id="female" value="2" v-model='gender'>
        <label for="female">女</label>
      </span>
    </div>
    <div>
      <span>爱好：</span>
      <input type="checkbox" id="ball" value="1" v-model='hobby'>
      <label for="ball">篮球</label>
      <input type="checkbox" id="sing" value="2" v-model='hobby'>
      <label for="sing">唱歌</label>
      <input type="checkbox" id="code" value="3" v-model='hobby'>
      <label for="code">写代码</label>
    </div>
    <div>
      <span>职业：</span>
      <select v-model='occupation' multiple>
        <option value="0">请选择职业...</option>
        <option value="1">教师</option>
        <option value="2">软件工程师</option>
        <option value="3">律师</option>
      </select>
    </div>
    <div>
      <span>个人简介：</span>
      <textarea v-model='desc'></textarea>
    </div>
    <div>
      <input type="submit" value="提交" @click.prevent='handle'>
    </div>
  </form>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      uname: 'lisi',          // 默认值lisi
      gender: 2,              // 默认第二个被选中
      hobby: ['2','3'],       // 默认第二、三个被选中
      // occupation: 3        // 默认选择第三个
      occupation: ['2','3'],  // 默认第二、三个被选中
      desc: 'nihao'           // 默认值nihao
    },
    methods: {
      handle: function(){
        // console.log(this.uname)
        // console.log(this.gender)
        // console.log(this.hobby.toString())
        // console.log(this.occupation)
        console.log(this.desc)
      }
    }
  });
</script>
```
可通过[这个](/demo/Vue/表单基本操作.html)查看  
表单域修饰符：
- number：转化为数值
- trim：去掉开始和结尾的空格
- lazy：将input事件(表单内数值发送改变就会触发)切换为change(失去焦点才会发送触发)事件

`<input v-model.number="age" type="number">`
#### 自定义指令
**自定义指令的语法规则**(获取元素焦点)：
```js
Vue.directive('focus' {
  inserted: function(el) {
  // 获取元素的焦点
    el.focus();
  }
})
```
**自定义指令用法**：
```js
<input type="text" v-focus>
```
**带参数的自定义指令**：
```html
<div id="app">
  <input type="text" v-color='msg'>
</div>
<script type="text/javascript">
  Vue.directive('color', {
    bind: function(el, binding){
      // 根据指令的参数设置背景色
      el.style.backgroundColor = binding.value.color;
    }
  });
  var vm = new Vue({
    el: '#app',
    data: {
      msg: {
        color: 'blue'
      }
    },
  });
</script>
```
**局部指令**：
```js
var vm = new Vue({
  el: '#app',
  data: {
    msg: {
      color: 'red'
    }
  },
  directives: {
    color: {
      bind: function(el, binding){
        el.style.backgroundColor = binding.value.color;
      }
    },
    focus: {
      inserted: function(el) {
        el.focus();
      }
    }
  }
});
```
#### 计算属性

#### 侦听器
#### 过滤器
#### 生命周期

### 综合案例